# サブディレクトリ用CLAUDE.mdの初期化

このコマンドは、 {{subdir}} に上位CLAUDE.mdを継承した軽量なCLAUDE.mdファイルを作成します。

## 実行手順

以下の手順で{{subdir}}に新しいCLAUDE.mdを作成してください:

### 1. 上位CLAUDE.mdの探索

- 現在のワーキングディレクトリから開始
- 親ディレクトリを再帰的に遡り、最も近いCLAUDE.mdファイルを検索
- 見つかった場合、そのパスと内容を記録

### 2. 上位CLAUDE.mdの分析（見つかった場合）

上位CLAUDE.mdの内容を分析し、以下のカテゴリに分類してください:

**継承する項目（新しいCLAUDE.mdには記載しない）:**
- 共通の会話ガイドライン（言語設定、トーン等）
- 共通の開発哲学（TDD、コーディング規約等）
- 共通のツール使用方針
- プロジェクト全体に適用される一般的な指示

**このディレクトリ固有として記載すべき項目の例:**
- このサブディレクトリ/モジュールのアーキテクチャ
- ディレクトリ固有のファイル構造
- ローカルな命名規則
- サブプロジェクト専用のコマンドやタスク
- 上位の設定を上書きする項目

### 3. 新しいCLAUDE.mdの生成

以下の構造で新しいCLAUDE.mdを {{subdir}} に作成してください:

```markdown
# CLAUDE.md

<!-- このファイルは上位のCLAUDE.mdを継承しています -->
<!-- 上位CLAUDE.md: [相対パス] -->

## このディレクトリについて

[このディレクトリの目的や役割を簡潔に記述]

## アーキテクチャ

[このディレクトリ固有のアーキテクチャや構造を記述]

## ディレクトリ構造

[重要なファイルやサブディレクトリの説明]

## 固有のコマンド/タスク

[このディレクトリで使用する特別なコマンドやタスクがあれば記述]

## その他の注意事項

[その他、このディレクトリで作業する際の注意事項]
```

### 4. 上位CLAUDE.mdが見つからない場合

標準的なCLAUDE.mdテンプレートを作成してください:

```markdown
# CLAUDE.md

This file provides guidance to Claude Code when working with code in this directory.

## Directory Purpose

[このディレクトリの目的を記述]

## Architecture

[アーキテクチャの説明]

## Common Commands

[よく使うコマンド]

## Notes

[その他の注意事項]
```

### 5. 確認と完了

- 生成したCLAUDE.mdの内容をユーザーに提示
- 上位CLAUDE.mdとの重複がないことを確認
- 必要に応じて、ユーザーが編集できるように案内

## 重要な原則

1. **重複を避ける**: 上位CLAUDE.mdに記載されている内容は繰り返さない
2. **差分のみを記載**: このディレクトリ固有の情報のみを記述
3. **参照を明記**: 上位CLAUDE.mdへの相対パスを必ず含める
4. **軽量に保つ**: 必要最小限の情報のみを記載
5. **継承を意識**: 上位の設定が自動的に適用されることを前提に記述
