---
name: init-sub-dir
description: サブディレクトリ用CLAUDE.mdの初期化。上位CLAUDE.mdを自動検出し、継承関係を考慮した軽量なCLAUDE.mdを生成する。「CLAUDE.md作って」「サブディレクトリにCLAUDE.md」「init CLAUDE.md」「subdirのCLAUDE.md初期化」のようにサブディレクトリ向けのCLAUDE.md作成を依頼されたときに使用する。
---

# init-sub-dir

上位CLAUDE.mdを継承した軽量なCLAUDE.mdをサブディレクトリに生成するスキル。
重複を避け、そのディレクトリ固有の情報のみを記載する。

## ワークフロー

### Step 1: 対象ディレクトリの確認

- ユーザーに対象のサブディレクトリを確認する
- 対象ディレクトリが存在しない場合は作成するか確認する
- 既にCLAUDE.mdが存在する場合は上書きしてよいか確認する

### Step 2: 上位CLAUDE.mdの探索

- 対象ディレクトリの親ディレクトリから再帰的に上方向へ探索する
- 最も近いCLAUDE.mdファイルを検出し、パスと内容を記録する
- 見つからなかった場合はStep 4のフォールバックテンプレートを使用する

### Step 3: 上位CLAUDE.mdの分析

見つかった上位CLAUDE.mdの内容を以下のように分類する:

**継承される項目（新CLAUDE.mdには書かない）:**
- 共通の会話ガイドライン（言語設定、トーン等）
- 共通の開発哲学（TDD、コーディング規約等）
- 共通のツール使用方針
- プロジェクト全体に適用される一般的な指示

**このディレクトリ固有として記載する項目:**
- サブディレクトリ/モジュールのアーキテクチャ
- ディレクトリ固有のファイル構造
- ローカルな命名規則や規約
- サブプロジェクト専用のコマンドやタスク
- 上位設定を上書きする項目

### Step 4: CLAUDE.mdの生成

#### 親CLAUDE.mdがある場合のテンプレート

    # CLAUDE.md

    <!-- このファイルは上位のCLAUDE.mdを継承しています -->
    <!-- 上位CLAUDE.md: [相対パス] -->

    ## このディレクトリについて

    [このディレクトリの目的や役割を簡潔に記述]

    ## アーキテクチャ

    [このディレクトリ固有のアーキテクチャや構造を記述]

    ## ディレクトリ構造

    [重要なファイルやサブディレクトリの説明]

    ## 固有のコマンド/タスク

    [このディレクトリで使用する特別なコマンドやタスクがあれば記述]

    ## その他の注意事項

    [その他、このディレクトリで作業する際の注意事項]

#### 親CLAUDE.mdがない場合のフォールバックテンプレート

    # CLAUDE.md

    This file provides guidance to Claude Code when working with code in this directory.

    ## Directory Purpose

    [このディレクトリの目的を記述]

    ## Architecture

    [アーキテクチャの説明]

    ## Common Commands

    [よく使うコマンド]

    ## Notes

    [その他の注意事項]

### Step 5: レビューと完了

- 生成したCLAUDE.mdの内容をユーザーに提示する
- 上位CLAUDE.mdとの重複がないことを確認する
- 必要に応じてユーザーが編集できるように案内する

## 重要な原則

1. **重複を避ける**: 上位CLAUDE.mdに記載されている内容は繰り返さない
2. **差分のみを記載**: このディレクトリ固有の情報のみを記述する
3. **参照を明記**: 上位CLAUDE.mdへの相対パスを必ず含める
4. **軽量に保つ**: 必要最小限の情報のみを記載する
5. **継承を前提にする**: 上位の設定が自動的に適用されることを前提に記述する
