[include]
  path = ~/.config/git/gitconfig.local
[includeIf "gitdir:~/src/github.com/usadamasa/"]
  path = ~/.config/git/gitconfig.private
[color]
  ui = true
[page]
  log = diff-highlight | less
  show = diff-highlight | less
  diff = diff-highlight | less
[pull]
  rebase = true
  ff = only
[diff]
  tool = vimdiff
[core]
  excludesfile = ~/.config/git/ignore
  ignorecase = false
[ghq]
  root = ~/src
[http]
  sslVerify = false
[merge]
  conflictStyle = diff3
[filter "lfs"]
  clean = git-lfs clean -- %f
  smudge = git-lfs smudge -- %f
  process = git-lfs filter-process
  required = true
[alias]
  mc = "!f() { \
    default_branch=$(git symbolic-ref refs/remotes/origin/HEAD | sed 's@^refs/remotes/origin/@@'); \
    current_branch=$(git rev-parse --abbrev-ref HEAD); \
    if [ \"$current_branch\" = \"$default_branch\" ]; then \
      git pull origin HEAD && gh poi; \
    else \
      default_wt_path=$(git worktree list | grep \"\\[$default_branch\\]\" | awk '{print $1}'); \
      original_dir=$(pwd); \
      if [ -n \"$default_wt_path\" ] && [ -d \"$default_wt_path\" ]; then \
        cd \"$default_wt_path\" && git pull origin HEAD && cd \"$original_dir\" && gh poi; \
      else \
        git fetch origin \"$default_branch:$default_branch\" && gh poi; \
      fi \
    fi \
  }; f"
[fetch]
  prune = true
[init]
  defaultBranch = main
[wt]
	copyignored = true
	copyuntracked = true
	copymodified = true
	hook = test -f .envrc && direnv allow || true
	basedir = ../worktrees/{gitroot}
